<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>笔记</title>
  
  <subtitle>以每一个问题为目标，每解决一个问题给自己及时反馈</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.wjc66.cn/"/>
  <updated>2024-03-21T02:10:08.742Z</updated>
  <id>https://blog.wjc66.cn/</id>
  
  <author>
    <name>w-klover</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>postgresql异步创建索引或者删除索引</title>
    <link href="https://blog.wjc66.cn/postgresql%E5%BC%82%E6%AD%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%88%96%E8%80%85%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95/"/>
    <id>https://blog.wjc66.cn/postgresql%E5%BC%82%E6%AD%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%88%96%E8%80%85%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95/</id>
    <published>2024-03-21T02:07:59.000Z</published>
    <updated>2024-03-21T02:10:08.742Z</updated>
    
    <content type="html"><![CDATA[<p>在 PostgreSQL 中，可以通过使用 CREATE INDEX 命令来异步创建索引。PostgreSQL 会将创建索引的任务放入后台进程进行处理，不会阻塞当前的数据库操作。</p><p>要创建一个异步索引，可以使用 CONCURRENTLY 关键字。这允许你在不锁定表的情况下创建索引，这在创建大型索引时特别有用，因为它可以减少对正常数据库操作的影响。</p><p>以下是一个创建异步索引的示例代码：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> CONCURRENTLY index_name <span class="keyword">ON</span> table_name (column_name);</span><br></pre></td></tr></table></figure><ol><li><p>删除索引 DROP INDEX CONCURRENTLY “public”.”IDX_e29aa01138f7e5dbe59261e52c”;</p></li><li><p>创建索引</p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> <span class="string">"IDX_25db9e4a7d54a460f256c567b2"</span> <span class="keyword">ON</span> <span class="string">"public"</span>.<span class="string">"attachment"</span> <span class="keyword">USING</span> btree (</span><br><span class="line">  <span class="string">"mediaId"</span> <span class="keyword">COLLATE</span> <span class="string">"pg_catalog"</span>.<span class="string">"default"</span> <span class="string">"pg_catalog"</span>.<span class="string">"text_ops"</span> <span class="keyword">ASC</span> <span class="keyword">NULLS</span> <span class="keyword">LAST</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在 PostgreSQL 中，可以通过使用 CREATE INDEX 命令来异步创建索引。PostgreSQL 会将创建索引的任务放入后台进程进行处理，不会阻塞当前的数据库操作。&lt;/p&gt;
&lt;p&gt;要创建一个异步索引，可以使用 CONCURRENTLY 关键字。这允许你在不锁定
      
    
    </summary>
    
    
    
      <category term="postgresql" scheme="https://blog.wjc66.cn/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>java序列化进行参数脱敏</title>
    <link href="https://blog.wjc66.cn/java%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%9B%E8%A1%8C%E5%8F%82%E6%95%B0%E8%84%B1%E6%95%8F/"/>
    <id>https://blog.wjc66.cn/java%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%9B%E8%A1%8C%E5%8F%82%E6%95%B0%E8%84%B1%E6%95%8F/</id>
    <published>2024-03-20T09:20:30.000Z</published>
    <updated>2024-03-20T09:21:06.979Z</updated>
    
    <content type="html"><![CDATA[<h3 id="JsonSerializer"><a href="#JsonSerializer" class="headerlink" title="JsonSerializer"></a>JsonSerializer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CardNumberSerialize</span> <span class="keyword">extends</span> <span class="title">JsonSerializer</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serialize</span><span class="params">(String s, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        jsonGenerator.writeString(Objects.equals(s, <span class="string">""</span>) ? s : s.replaceAll(<span class="string">"(\\d&#123;6&#125;)\\d&#123;6&#125;(\\d&#123;4&#125;)"</span>, <span class="string">"$1******$2"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setName(<span class="string">"张三"</span>);</span><br><span class="line">        student.setCardNumber(<span class="string">"1111111111111111"</span>);</span><br><span class="line">        student.setAddress(<span class="string">"beijing"</span>);</span><br><span class="line">        System.out.println(JsonUtil.toJSONString(student));</span><br><span class="line">        <span class="comment">// ======&gt; &#123;"name":"张三","cardNumber":"111111******1111","address":"***"&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@JsonSerialize</span>(using = CardNumberSerialize<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">        <span class="title">private</span> <span class="title">String</span> <span class="title">cardNumber</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@JsonSerialize</span>(using = CompleteDesensitizationSerialize<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">        <span class="title">private</span> <span class="title">String</span> <span class="title">address</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/klover2/java-demo/blob/master/serialize-demo/src/main/java/com/klover/serialize/Demo.java" target="_blank" rel="external nofollow noopener noreferrer">代码示例</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;JsonSerializer&quot;&gt;&lt;a href=&quot;#JsonSerializer&quot; class=&quot;headerlink&quot; title=&quot;JsonSerializer&quot;&gt;&lt;/a&gt;JsonSerializer&lt;/h3&gt;&lt;figure class=&quot;highlight 
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>上传日志到aws日志服务</title>
    <link href="https://blog.wjc66.cn/%E4%B8%8A%E4%BC%A0%E6%97%A5%E5%BF%97%E5%88%B0aws%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1/"/>
    <id>https://blog.wjc66.cn/%E4%B8%8A%E4%BC%A0%E6%97%A5%E5%BF%97%E5%88%B0aws%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1/</id>
    <published>2024-03-20T08:47:17.000Z</published>
    <updated>2024-03-20T08:48:19.735Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>software.amazon.awssdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloudwatchlogs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.16.60<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"key1"</span>, <span class="string">"val1"</span>);</span><br><span class="line">map.put(<span class="string">"key2"</span>, <span class="string">"val2"</span>);</span><br><span class="line">CloudWatchLog.putLog(map);</span><br></pre></td></tr></table></figure><h2 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudWatchLog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String accessKey = <span class="string">"&lt;your key&gt;"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String secretKey = <span class="string">"&lt;your secret&gt;"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String region = <span class="string">"us-west-1"</span>;</span><br><span class="line">    <span class="comment">// 日志组的名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String groupName = <span class="string">"klover-test"</span>;</span><br><span class="line">    <span class="comment">// 日志流的名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String streamName = <span class="string">"klover"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> CloudWatchLogsClient slsClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        AwsBasicCredentials credentials = AwsBasicCredentials.create(</span><br><span class="line">                accessKey,</span><br><span class="line">                secretKey</span><br><span class="line">        );</span><br><span class="line">        slsClient = CloudWatchLogsClient.builder()</span><br><span class="line">                .region(Region.of(region))</span><br><span class="line">                .credentialsProvider(() -&gt; credentials)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传日志</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params 参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">putLog</span><span class="params">(Map&lt;String, Object&gt; params)</span> </span>&#123;</span><br><span class="line">        DescribeLogStreamsRequest logStreamRequest = DescribeLogStreamsRequest.builder()</span><br><span class="line">                .logGroupName(groupName)</span><br><span class="line">                .logStreamNamePrefix(streamName)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        DescribeLogStreamsResponse describeLogStreamsResponse = slsClient.describeLogStreams(logStreamRequest);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Assume that a single stream is returned since a specific stream name was</span></span><br><span class="line">        <span class="comment">// specified in the previous request.</span></span><br><span class="line">        String sequenceToken = describeLogStreamsResponse.logStreams().getFirst().uploadSequenceToken();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Build an input log message to put to CloudWatch.</span></span><br><span class="line">        InputLogEvent inputLogEvent = InputLogEvent.builder()</span><br><span class="line">                .message(JsonUtil.toJSONString(params))</span><br><span class="line">                .timestamp(System.currentTimeMillis())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Specify the request parameters.</span></span><br><span class="line">        <span class="comment">// Sequence token is required so that the log can be written to the</span></span><br><span class="line">        <span class="comment">// latest location in the stream.</span></span><br><span class="line">        PutLogEventsRequest putLogEventsRequest = PutLogEventsRequest.builder()</span><br><span class="line">                .logEvents(Collections.singletonList(inputLogEvent))</span><br><span class="line">                .logGroupName(groupName)</span><br><span class="line">                .logStreamName(streamName)</span><br><span class="line">                .sequenceToken(sequenceToken)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        slsClient.putLogEvents(putLogEventsRequest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/klover2/java-demo/blob/master/aws-demo/cloud-watch-log-demo/src/test/java/com/klover/cloudwatchlog/CloudWatchLogTest.java" target="_blank" rel="external nofollow noopener noreferrer">代码示例</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装包&quot;&gt;&lt;a href=&quot;#安装包&quot; class=&quot;headerlink&quot; title=&quot;安装包&quot;&gt;&lt;/a&gt;安装包&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
      <category term="amazon" scheme="https://blog.wjc66.cn/tags/amazon/"/>
    
  </entry>
  
  <entry>
    <title>json序列化和反序列化</title>
    <link href="https://blog.wjc66.cn/json%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    <id>https://blog.wjc66.cn/json%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</id>
    <published>2024-03-20T06:21:54.000Z</published>
    <updated>2024-03-20T08:48:00.033Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.15.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.15.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Student student = <span class="keyword">new</span> Student();</span><br><span class="line">student.setName(<span class="string">"张三"</span>);</span><br><span class="line">student.setAge(<span class="number">10</span>);</span><br><span class="line">String jsonString = JsonUtil.toJSONString(student);</span><br><span class="line">System.out.println(jsonString);</span><br></pre></td></tr></table></figure><h3 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="string">"&#123;\"name\":\"张三\",\"age\":10&#125;"</span>;</span><br><span class="line">      <span class="comment">// 第一种</span></span><br><span class="line">      Student parse = JsonUtil.parse(s, Student<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">      System.out.println(parse);</span><br><span class="line">      <span class="comment">// 第二种</span></span><br><span class="line">      Student parse1 = JsonUtil.parse(s, <span class="keyword">new</span> TypeReference&lt;Student&gt;() &#123;</span><br><span class="line">      &#125;);</span><br><span class="line">      System.out.println(parse1);</span><br><span class="line">      <span class="comment">// 第三种</span></span><br><span class="line">      JavaType javaType = JsonUtil.getCollectionType(Student<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">      Object parse2 = JsonUtil.parse(s, javaType);</span><br><span class="line">      System.out.println(parse2);</span><br></pre></td></tr></table></figure><p><a href="https://github.com/klover2/java-demo/blob/master/json-demo/src/test/java/com/klover/jackson/JsonUtilTest.java" target="_blank" rel="external nofollow noopener noreferrer">代码示例</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装包&quot;&gt;&lt;a href=&quot;#安装包&quot; class=&quot;headerlink&quot; title=&quot;安装包&quot;&gt;&lt;/a&gt;安装包&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>xml转json</title>
    <link href="https://blog.wjc66.cn/xml%E8%BD%ACjson/"/>
    <id>https://blog.wjc66.cn/xml%E8%BD%ACjson/</id>
    <published>2024-03-20T06:15:53.000Z</published>
    <updated>2024-03-20T06:22:38.004Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.15.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@JacksonXmlRootElement</span>(localName = <span class="string">"room"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Room</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 房间名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"name"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 房间号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"no"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer no;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 其他信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"info"</span>)</span><br><span class="line">    <span class="keyword">private</span> Info info;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JacksonXmlElementWrapper</span>(localName = <span class="string">"students"</span>)</span><br><span class="line">    <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"student"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 老师</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JacksonXmlElementWrapper</span>(useWrapping = <span class="keyword">false</span>)</span><br><span class="line">    <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"teacher"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;Teacher&gt; teachers;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"name"</span>)</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"age"</span>)</span><br><span class="line">        <span class="keyword">private</span> Integer age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"name"</span>)</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"age"</span>)</span><br><span class="line">        <span class="keyword">private</span> Integer age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Info</span> </span>&#123;</span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"address"</span>)</span><br><span class="line">        <span class="keyword">private</span> String address;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 人数</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@JacksonXmlProperty</span>(localName = <span class="string">"number"</span>)</span><br><span class="line">        <span class="keyword">private</span> Integer number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="toStringXml"><a href="#toStringXml" class="headerlink" title="toStringXml"></a>toStringXml</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Room room = <span class="keyword">new</span> Room();</span><br><span class="line">        room.setNo(<span class="number">1</span>);</span><br><span class="line">        room.setName(<span class="string">"天水一班"</span>);</span><br><span class="line">        Room.Info info = <span class="keyword">new</span> Room.Info();</span><br><span class="line">        info.setAddress(<span class="string">"天水"</span>);</span><br><span class="line">        info.setNumber(<span class="number">5</span>);</span><br><span class="line">        room.setInfo(info);</span><br><span class="line">        ArrayList&lt;Room.Teacher&gt; teachers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Room.Teacher teacher = <span class="keyword">new</span> Room.Teacher();</span><br><span class="line">        teacher.setAge(<span class="number">40</span>);</span><br><span class="line">        teacher.setName(<span class="string">"王老师"</span>);</span><br><span class="line">        teachers.add(teacher);</span><br><span class="line">        Room.Teacher teacher2 = <span class="keyword">new</span> Room.Teacher();</span><br><span class="line">        teacher2.setAge(<span class="number">45</span>);</span><br><span class="line">        teacher2.setName(<span class="string">"曾老师"</span>);</span><br><span class="line">        teachers.add(teacher2);</span><br><span class="line">        room.setTeachers(teachers);</span><br><span class="line">        ArrayList&lt;Room.Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Room.Student student = <span class="keyword">new</span> Room.Student();</span><br><span class="line">        student.setAge(<span class="number">18</span>);</span><br><span class="line">        student.setName(<span class="string">"张三"</span>);</span><br><span class="line">        students.add(student);</span><br><span class="line">        Room.Student student2 = <span class="keyword">new</span> Room.Student();</span><br><span class="line">        student2.setAge(<span class="number">19</span>);</span><br><span class="line">        student2.setName(<span class="string">"李四"</span>);</span><br><span class="line">        students.add(student2);</span><br><span class="line">        Room.Student student3 = <span class="keyword">new</span> Room.Student();</span><br><span class="line">        student3.setAge(<span class="number">19</span>);</span><br><span class="line">        student3.setName(<span class="string">"王五"</span>);</span><br><span class="line">        students.add(student3);</span><br><span class="line">        room.setStudents(students);</span><br><span class="line"></span><br><span class="line">        String xmlString = XmlUtil.toXMLString(room);</span><br><span class="line">        System.out.println(xmlString);</span><br><span class="line"><span class="comment">// 打印========&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        xmlString = "&lt;room&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;name&gt;天水一班&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;no&gt;1&lt;/no&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;info&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;address&gt;天水&lt;/address&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;number&gt;5&lt;/number&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;/info&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;students&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;name&gt;张三&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;age&gt;18&lt;/age&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;/student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;name&gt;李四&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;age&gt;19&lt;/age&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;/student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;name&gt;王五&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "            &lt;age&gt;19&lt;/age&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;/student&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;/students&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;teacher&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;name&gt;王老师&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;age&gt;40&lt;/age&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;/teacher&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;teacher&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;name&gt;曾老师&lt;/name&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "        &lt;age&gt;45&lt;/age&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "    &lt;/teacher&gt;\n" +</span></span><br><span class="line"><span class="comment">//                "&lt;/room&gt;";</span></span><br></pre></td></tr></table></figure><h3 id="toJson"><a href="#toJson" class="headerlink" title="toJson"></a>toJson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">String xmlString = <span class="string">"&lt;room&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;name&gt;天水一班&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;no&gt;1&lt;/no&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;info&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;address&gt;天水&lt;/address&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;number&gt;5&lt;/number&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;/info&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;students&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;name&gt;张三&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;age&gt;18&lt;/age&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;/student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;name&gt;李四&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;age&gt;19&lt;/age&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;/student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;name&gt;王五&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"            &lt;age&gt;19&lt;/age&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;/student&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;/students&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;teacher&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;name&gt;王老师&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;age&gt;40&lt;/age&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;/teacher&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;teacher&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;name&gt;曾老师&lt;/name&gt;\n"</span> +</span><br><span class="line">                <span class="string">"        &lt;age&gt;45&lt;/age&gt;\n"</span> +</span><br><span class="line">                <span class="string">"    &lt;/teacher&gt;\n"</span> +</span><br><span class="line">                <span class="string">"&lt;/room&gt;"</span>;</span><br><span class="line"></span><br><span class="line">        Room parse = XmlUtil.parse(xmlString, Room<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(parse);</span><br></pre></td></tr></table></figure><p><a href="https://github.com/klover2/java-demo/blob/master/json-demo/src/test/java/com/klover/jackson/XmlUtilTest.java" target="_blank" rel="external nofollow noopener noreferrer">代码示例</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装包&quot;&gt;&lt;a href=&quot;#安装包&quot; class=&quot;headerlink&quot; title=&quot;安装包&quot;&gt;&lt;/a&gt;安装包&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
      <category term="xml" scheme="https://blog.wjc66.cn/tags/xml/"/>
    
  </entry>
  
  <entry>
    <title>pgp加解密和生成密钥</title>
    <link href="https://blog.wjc66.cn/pgp%E5%8A%A0%E8%A7%A3%E5%AF%86%E5%92%8C%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5/"/>
    <id>https://blog.wjc66.cn/pgp%E5%8A%A0%E8%A7%A3%E5%AF%86%E5%92%8C%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5/</id>
    <published>2024-03-14T09:22:43.000Z</published>
    <updated>2024-03-14T09:24:35.668Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>GPG, 或 GnuPG (GNU Privacy Guard) 是一个遵照 OpenPGP 协议的用于加密、数字签名以及认证的软件。它与 PGP (Pretty Good Privacy) 的区别是它是开源的，而 PGP 则是 Symantec 公司的专有软件。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bouncycastle<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bcpg-jdk18on<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.77<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="代码使用"><a href="#代码使用" class="headerlink" title="代码使用"></a>代码使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生成公私钥</span></span><br><span class="line">PgpKeyDTO generate = PgpUtil.generate(<span class="string">"123456"</span>, <span class="string">"123@qq.com"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加密</span></span><br><span class="line"> String testMessage = PgpUtil.encrypt(<span class="string">"test message"</span>, <span class="keyword">this</span>.publicKey);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解密</span></span><br><span class="line">  String decrypt = PgpUtil.decrypt(message, <span class="keyword">this</span>.privateKey, <span class="keyword">this</span>.passphrase);</span><br></pre></td></tr></table></figure><p><a href="https://github.com/klover2/java-demo/blob/master/pgp-demo/src/test/java/com/klover/pgp/PgpUtilTest.java" target="_blank" rel="external nofollow noopener noreferrer">代码示例</a></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://medium.com/@kthsingh.ms/encrypt-and-decrypt-anything-bytes-files-streams-with-pgp-using-bouncy-castle-and-java-ad335ae9f747" target="_blank" rel="external nofollow noopener noreferrer">Encrypt and decrypt anything (bytes/files/streams) with PGP using bouncy castle and java</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;GPG, 或 GnuPG (GNU Privacy Guard) 是一个遵照 OpenPGP 协议的用于加密、数字签名以及认证的软件。它与 
      
    
    </summary>
    
    
    
      <category term="crypto" scheme="https://blog.wjc66.cn/tags/crypto/"/>
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
      <category term="pgp" scheme="https://blog.wjc66.cn/tags/pgp/"/>
    
  </entry>
  
  <entry>
    <title>使用STS临时访问凭证访问OSS</title>
    <link href="https://blog.wjc66.cn/%E4%BD%BF%E7%94%A8STS%E4%B8%B4%E6%97%B6%E8%AE%BF%E9%97%AE%E5%87%AD%E8%AF%81%E8%AE%BF%E9%97%AEOSS/"/>
    <id>https://blog.wjc66.cn/%E4%BD%BF%E7%94%A8STS%E4%B8%B4%E6%97%B6%E8%AE%BF%E9%97%AE%E5%87%AD%E8%AF%81%E8%AE%BF%E9%97%AEOSS/</id>
    <published>2023-09-21T08:30:47.000Z</published>
    <updated>2023-09-21T08:31:57.939Z</updated>
    
    <content type="html"><![CDATA[<p>todo</p><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://help.aliyun.com/zh/oss/developer-reference/use-temporary-access-credentials-provided-by-sts-to-access-oss?spm=a2c4g.11186623.4.1.3baf297alQfiKs&scm=20140722.H_100624._.ID_100624-OR_rec-V_1" target="_blank" rel="external nofollow noopener noreferrer">STS 临时访问凭证访问 OSS</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;todo&lt;/p&gt;
&lt;h2 id=&quot;文档&quot;&gt;&lt;a href=&quot;#文档&quot; class=&quot;headerlink&quot; title=&quot;文档&quot;&gt;&lt;/a&gt;文档&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://help.aliyun.com/zh/oss/developer-referenc
      
    
    </summary>
    
    
    
      <category term="nodejs" scheme="https://blog.wjc66.cn/tags/nodejs/"/>
    
      <category term="STS" scheme="https://blog.wjc66.cn/tags/STS/"/>
    
  </entry>
  
  <entry>
    <title>注册美区苹果账号</title>
    <link href="https://blog.wjc66.cn/%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BA%E8%8B%B9%E6%9E%9C%E8%B4%A6%E5%8F%B7/"/>
    <id>https://blog.wjc66.cn/%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BA%E8%8B%B9%E6%9E%9C%E8%B4%A6%E5%8F%B7/</id>
    <published>2023-09-21T08:29:24.000Z</published>
    <updated>2023-09-21T08:30:13.026Z</updated>
    
    <content type="html"><![CDATA[<p>链接 &gt; <a href="https://github.com/getlantern/lantern/wiki/%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BA%E8%8B%B9%E6%9E%9C%E8%B4%A6%E5%8F%B7" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/getlantern/lantern/wiki/%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BA%E8%8B%B9%E6%9E%9C%E8%B4%A6%E5%8F%B7</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;链接 &amp;gt; &lt;a href=&quot;https://github.com/getlantern/lantern/wiki/%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BA%E8%8B%B9%E6%9E%9C%E8%B
      
    
    </summary>
    
    
    
      <category term="other" scheme="https://blog.wjc66.cn/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>在PostgreSQL中创建只读用户</title>
    <link href="https://blog.wjc66.cn/%E5%9C%A8PostgreSQL%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%8F%AA%E8%AF%BB%E7%94%A8%E6%88%B7/"/>
    <id>https://blog.wjc66.cn/%E5%9C%A8PostgreSQL%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%8F%AA%E8%AF%BB%E7%94%A8%E6%88%B7/</id>
    <published>2023-09-21T08:25:08.000Z</published>
    <updated>2023-09-21T08:28:36.163Z</updated>
    
    <content type="html"><![CDATA[<h2 id="创建只读用户"><a href="#创建只读用户" class="headerlink" title="创建只读用户"></a>创建只读用户</h2><blockquote><p>CREATE USER readonly_user WITH PASSWORD ‘password’;</p></blockquote><p>这条命令会创建一个名为 readonly_user 的用户，并设置用户的密码为 ‘password’。请务必将 ‘password’ 替换为实际的密码。</p><h2 id="进入你需要赋予权限的数据库-授予只读权限"><a href="#进入你需要赋予权限的数据库-授予只读权限" class="headerlink" title="进入你需要赋予权限的数据库 授予只读权限"></a>进入你需要赋予权限的数据库 授予只读权限</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">ON</span> <span class="keyword">DATABASE</span> <span class="keyword">database</span> <span class="keyword">TO</span> readonly_user;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">USAGE</span> <span class="keyword">ON</span> <span class="keyword">SCHEMA</span> <span class="keyword">public</span> <span class="keyword">TO</span> readonly_user;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> <span class="keyword">ALL</span> <span class="keyword">TABLES</span> <span class="keyword">IN</span> <span class="keyword">SCHEMA</span> <span class="keyword">public</span> <span class="keyword">TO</span> readonly_user;</span><br></pre></td></tr></table></figure><p>其中，database 是要授予权限的数据库名称。</p><p>第一条命令 GRANT CONNECT ON DATABASE database TO readonly_user; 授予用户连接数据库的权限。</p><p>第二条命令 GRANT USAGE ON SCHEMA public TO readonly_user; 授予用户对数据库中公共模式的使用权限。</p><p>第三条命令 GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly_user; 授予用户对数据库中公共模式下所有表的只读权限。</p><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://deepinout.com/sqlite/sqlite-questions/89_postgresql_how_do_you_create_a_readonly_user_in_postgresql.html" target="_blank" rel="external nofollow noopener noreferrer">PostgreSQL 如何在 PostgreSQL 中创建只读用户</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;创建只读用户&quot;&gt;&lt;a href=&quot;#创建只读用户&quot; class=&quot;headerlink&quot; title=&quot;创建只读用户&quot;&gt;&lt;/a&gt;创建只读用户&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;CREATE USER readonly_user WITH PASSWORD ‘
      
    
    </summary>
    
    
    
      <category term="postgresql" scheme="https://blog.wjc66.cn/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>nodejs中google授权登录</title>
    <link href="https://blog.wjc66.cn/nodejs%E4%B8%ADgoogle%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95/"/>
    <id>https://blog.wjc66.cn/nodejs%E4%B8%ADgoogle%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95/</id>
    <published>2023-09-21T07:26:17.000Z</published>
    <updated>2023-09-21T08:26:39.440Z</updated>
    
    <content type="html"><![CDATA[<h2 id="google-授权配置"><a href="#google-授权配置" class="headerlink" title="google 授权配置"></a>google 授权配置</h2><p>创建项目 &gt;&gt; 在凭据页面创建 OAuth 2.0 客户端 ID &gt;&gt; 配置 (已获授权的重定向 URI) &gt;&gt; 测试完成 在 OAuth 同意屏幕 发布正式版</p><h2 id="授权跳转连接"><a href="#授权跳转连接" class="headerlink" title="授权跳转连接"></a>授权跳转连接</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">`https://accounts.google.com/o/oauth2/v2/auth?scope=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(</span></span></span><br><span class="line"><span class="string"><span class="subst">  <span class="string">"https://www.googleapis.com/auth/userinfo.email"</span></span></span></span><br><span class="line"><span class="string"><span class="subst">)&#125;</span>&amp;include_granted_scopes=true&amp;</span></span><br><span class="line"><span class="string">response_type=token&amp;state=1234&amp;redirect_uri=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(</span></span></span><br><span class="line"><span class="string"><span class="subst">  <span class="string">"&lt;跳转连接 需要在谷歌配置&gt;"</span></span></span></span><br><span class="line"><span class="string"><span class="subst">)&#125;</span>&amp;client_id=client_id`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(url);</span><br></pre></td></tr></table></figure><h2 id="授权成功后跳转链接如下"><a href="#授权成功后跳转链接如下" class="headerlink" title="授权成功后跳转链接如下"></a>授权成功后跳转链接如下</h2><blockquote><p>(跳转连接 需要在谷歌配置)#state=1234&amp;access_token=<access_token>&amp;token_type=Bearer&amp;expires_in=3599&amp;scope=email%20<a href="https://www.googleapis.com/auth/userinfo.email%20https://www.googleapis.com/auth/drive.metadata.readonly%20openid&amp;authuser=0&amp;prompt=none" target="_blank" rel="external nofollow noopener noreferrer">https://www.googleapis.com/auth/userinfo.email%20https://www.googleapis.com/auth/drive.metadata.readonly%20openid&amp;authuser=0&amp;prompt=none</a></access_token></p></blockquote><h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> superagent <span class="keyword">from</span> <span class="string">"superagent"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`https://www.googleapis.com/oauth2/v1/userinfo`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> superagent.get(url, &#123; access_token: token &#125;).set(&#123;</span><br><span class="line">    <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取客户邮箱 和id 头像</span></span><br><span class="line">  <span class="keyword">return</span> res.body;</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://developers.google.cn/identity/protocols/oauth2/javascript-implicit-flow?hl=zh-cn" target="_blank" rel="external nofollow noopener noreferrer">适用于客户端 Web 应用的 OAuth 2.0</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;google-授权配置&quot;&gt;&lt;a href=&quot;#google-授权配置&quot; class=&quot;headerlink&quot; title=&quot;google 授权配置&quot;&gt;&lt;/a&gt;google 授权配置&lt;/h2&gt;&lt;p&gt;创建项目 &amp;gt;&amp;gt; 在凭据页面创建 OAuth 2.0 客户
      
    
    </summary>
    
    
    
      <category term="nodejs" scheme="https://blog.wjc66.cn/tags/nodejs/"/>
    
      <category term="google" scheme="https://blog.wjc66.cn/tags/google/"/>
    
  </entry>
  
  <entry>
    <title>nodejs中google-authenticator使用</title>
    <link href="https://blog.wjc66.cn/nodejs%E4%B8%ADgoogle-authenticator%E4%BD%BF%E7%94%A8/"/>
    <id>https://blog.wjc66.cn/nodejs%E4%B8%ADgoogle-authenticator%E4%BD%BF%E7%94%A8/</id>
    <published>2023-09-21T07:19:28.000Z</published>
    <updated>2023-09-21T07:26:48.276Z</updated>
    
    <content type="html"><![CDATA[<h2 id="GA-6-为验证码"><a href="#GA-6-为验证码" class="headerlink" title="GA 6 为验证码"></a>GA 6 为验证码</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; authenticator &#125; <span class="keyword">from</span> <span class="string">"otplib"</span>;</span><br><span class="line"></span><br><span class="line">authenticator.options = &#123;</span><br><span class="line">  epoch: <span class="built_in">Date</span>.now() - <span class="number">30</span> * <span class="number">1000</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> secret_key = authenticator.generateSecret();</span><br><span class="line"><span class="built_in">console</span>.log(authenticator.generate(secret_key));</span><br></pre></td></tr></table></figure><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://github.com/google/google-authenticator/wiki/Key-Uri-Format" target="_blank" rel="external nofollow noopener noreferrer">google-authenticator</a><br><a href="https://www.5axxw.com/wiki/content/6cwktj" target="_blank" rel="external nofollow noopener noreferrer">Otplib</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;GA-6-为验证码&quot;&gt;&lt;a href=&quot;#GA-6-为验证码&quot; class=&quot;headerlink&quot; title=&quot;GA 6 为验证码&quot;&gt;&lt;/a&gt;GA 6 为验证码&lt;/h2&gt;&lt;figure class=&quot;highlight ts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
    
      <category term="nodejs" scheme="https://blog.wjc66.cn/tags/nodejs/"/>
    
      <category term="google" scheme="https://blog.wjc66.cn/tags/google/"/>
    
  </entry>
  
  <entry>
    <title>node版本管理工具nvm</title>
    <link href="https://blog.wjc66.cn/node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7nvm/"/>
    <id>https://blog.wjc66.cn/node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7nvm/</id>
    <published>2023-09-21T07:12:16.000Z</published>
    <updated>2023-09-21T07:20:12.642Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux-Centos-8-环境下安装-nvm"><a href="#Linux-Centos-8-环境下安装-nvm" class="headerlink" title="Linux Centos 8 环境下安装 nvm"></a>Linux Centos 8 环境下安装 nvm</h2><p>官网：<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/nvm-sh/nvm</a></p><h3 id="下载-nvm-sh-文件"><a href="#下载-nvm-sh-文件" class="headerlink" title="下载 nvm.sh 文件"></a>下载 nvm.sh 文件</h3><p>方式一：命令行工具输入，通过 curl 工具下载</p><blockquote><p>curl -o- <a href="https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh" target="_blank" rel="external nofollow noopener noreferrer">https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh</a> | bash</p></blockquote><p>方式二：命令行工具输入，通过 wget 工具下载</p><blockquote><p>wget -qO- <a href="https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh" target="_blank" rel="external nofollow noopener noreferrer">https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh</a> | bash</p></blockquote><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>这将在主目录下创建一个.nvm 目录。nvm 保留自己的二进制文件和所有其他所需文件。然后在用户.bashrc 文件中设置环境。您需要通过运行以下命令来加载此环境以设置所需的配置：</p><blockquote><p>source ~/.bashrc</p></blockquote><h2 id="windows-环境下安装-nvm"><a href="#windows-环境下安装-nvm" class="headerlink" title="windows 环境下安装 nvm"></a>windows 环境下安装 nvm</h2><h3 id="下载指定版本安装包"><a href="#下载指定版本安装包" class="headerlink" title="下载指定版本安装包"></a>下载指定版本安装包</h3><blockquote><p><a href="https://github.com/nvm-sh/nvm/releases" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/nvm-sh/nvm/releases</a></p></blockquote><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://yuencode.cn/2023/01/03/Linux-Centos-8-%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85nvm/" target="_blank" rel="external nofollow noopener noreferrer">Linux Centos 8 环境下安装 nvm</a><br><a href="https://blog.csdn.net/baidu_30506559/article/details/127379924" target="_blank" rel="external nofollow noopener noreferrer">nvm 安装及基础命令</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux-Centos-8-环境下安装-nvm&quot;&gt;&lt;a href=&quot;#Linux-Centos-8-环境下安装-nvm&quot; class=&quot;headerlink&quot; title=&quot;Linux Centos 8 环境下安装 nvm&quot;&gt;&lt;/a&gt;Linux Centos 8
      
    
    </summary>
    
    
    
      <category term="nodejs" scheme="https://blog.wjc66.cn/tags/nodejs/"/>
    
      <category term="nvm" scheme="https://blog.wjc66.cn/tags/nvm/"/>
    
  </entry>
  
  <entry>
    <title>IDEA:java:无效的源发行版：14</title>
    <link href="https://blog.wjc66.cn/IDEA-java-%E6%97%A0%E6%95%88%E7%9A%84%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88%EF%BC%9A14/"/>
    <id>https://blog.wjc66.cn/IDEA-java-%E6%97%A0%E6%95%88%E7%9A%84%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88%EF%BC%9A14/</id>
    <published>2023-07-14T03:41:00.000Z</published>
    <updated>2023-07-14T03:42:53.527Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h2><p>用 IDEA 编写 sdk 代码运行后报如下错误：<br><code>警告: 源发行版 14 需要目标发行版 14</code></p><h2 id="问题原因："><a href="#问题原因：" class="headerlink" title="问题原因："></a>问题原因：</h2><p>出现该问题的原因是项目 Project 当中的 jdk 与电脑当中的 jdk 版本不一致造成的。</p><h2 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h2><p>修改 IDEA 当中的 Project 项目的 jdk 版本</p><ol><li>修改 Project 的 SDK 版本<br><img src="https://img-blog.csdnimg.cn/c7c4e3084a3348bfadeab5bd23b5a010.png" alt="在这里插入图片描述"></li><li>修改 Module 模块的 Language Level<br><img src="https://img-blog.csdnimg.cn/baf4d6b24a454decbe98c5a860783a2b.png" alt="在这里插入图片描述"></li><li>修改 Module 模块中的 Module SDK<br><img src="https://img-blog.csdnimg.cn/12cf70053f044e1e9ba6133776459ca2.png" alt></li><li>设置 plaform settings Sdks<br><img src="https://img-blog.csdnimg.cn/0bf3e0671c5c499b9da89c7e3773691d.png" alt="在这里插入图片描述"></li><li>找到 Java Complier，修改 byte code version，使其版本与 sdk 版本保持一致<br><img src="https://img-blog.csdnimg.cn/a480b77b9e774f1891bd335b0385703c.png" alt="在这里插入图片描述"><br>修改过后，再次编译运行就没有问题了！</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题描述：&quot;&gt;&lt;a href=&quot;#问题描述：&quot; class=&quot;headerlink&quot; title=&quot;问题描述：&quot;&gt;&lt;/a&gt;问题描述：&lt;/h2&gt;&lt;p&gt;用 IDEA 编写 sdk 代码运行后报如下错误：&lt;br&gt;&lt;code&gt;警告: 源发行版 14 需要目标发行版 14&lt;
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>postgresql敏感信息处理</title>
    <link href="https://blog.wjc66.cn/postgresql%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86/"/>
    <id>https://blog.wjc66.cn/postgresql%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86/</id>
    <published>2023-05-11T11:55:22.000Z</published>
    <updated>2023-05-11T12:04:46.988Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>对手机号 和 邮箱进行脱敏处理</p><h2 id="处理方式"><a href="#处理方式" class="headerlink" title="处理方式"></a>处理方式</h2><p>使用数据库<code>regexp_replace</code>函数进行数据处理</p><a id="more"></a><h2 id="regexp-replace函数介绍"><a href="#regexp-replace函数介绍" class="headerlink" title="regexp_replace函数介绍"></a><code>regexp_replace</code>函数介绍</h2><p>regexp_replace(source, pattern, replace_string, occurrence)<br>参数说明：</p><ol><li>source: string 类型，要替换的原始字符串。</li><li>pattern: string 类型常量，要匹配的正则模式，pattern 为空串时抛异常。</li><li>replace_string:string，将匹配的 pattern 替换成的字符串。</li><li>occurrence: bigint 类型常量，必须大于等于 0，<br>大于 0：表示将第几次匹配替换成 replace_string，<br>等于 0：表示替换掉所有的匹配子串。<br>其它类型或小于 0 抛异常。</li></ol><p>返回值：<br>将 source 字符串中匹配 pattern 的子串替换成指定字符串后返回，当输入 source, pattern, occurrence 参数为 NULL 时返回 NULL，若 replace_string 为 NULL 且 pattern 有匹配，返回 NULL，replace_string 为 NULL 但 pattern 不匹配，则返回原串。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users: User[] = <span class="keyword">await</span> <span class="keyword">this</span>.userRepo</span><br><span class="line">  .createQueryBuilder()</span><br><span class="line">  .select(<span class="string">'"id"'</span>)</span><br><span class="line">  .addSelect(<span class="string">"nickname"</span>)</span><br><span class="line">  .addSelect(<span class="string">`REGEXP_REPLACE(phone, '(^.&#123;3&#125;).*(\\d&#123;4&#125;)$', '\\1**\\2')`</span>, <span class="string">"phone"</span>) <span class="comment">// 格式 +86**4352</span></span><br><span class="line">  .addSelect(<span class="string">`REGEXP_REPLACE(email, '(^.&#123;2&#125;).*@(.*)', '\\1**@\\2')`</span>, <span class="string">"email"</span>) <span class="comment">// 格式 fe**@qq.com</span></span><br><span class="line">  .where(&#123; id: <span class="string">"c66d2386-bcfb-420d-91be-ca6af07415d2"</span> &#125;)</span><br><span class="line">  .getRawMany();</span><br></pre></td></tr></table></figure><p>生成的 sql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">"id"</span>, nickname, REGEXP_REPLACE(phone, <span class="string">'(^.&#123;3&#125;).*(\d&#123;4&#125;)$'</span>, <span class="string">'\1**\2'</span>) <span class="keyword">AS</span> <span class="string">"phone"</span>, REGEXP_REPLACE(email, <span class="string">'(^.&#123;2&#125;).*@(.*)'</span>, <span class="string">'\1**@\2'</span>) <span class="keyword">AS</span> <span class="string">"email"</span> <span class="keyword">FROM</span> <span class="string">"user"</span> <span class="string">"User"</span> <span class="keyword">WHERE</span> ( <span class="string">"User"</span>.<span class="string">"id"</span> = <span class="string">'c66d2386-bcfb-420d-91be-ca6af07415d2'</span> ) <span class="keyword">AND</span> ( <span class="string">"User"</span>.<span class="string">"deleteTime"</span> <span class="keyword">IS</span> <span class="literal">NULL</span> )</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;p&gt;对手机号 和 邮箱进行脱敏处理&lt;/p&gt;
&lt;h2 id=&quot;处理方式&quot;&gt;&lt;a href=&quot;#处理方式&quot; class=&quot;headerlink&quot; title=&quot;处理方式&quot;&gt;&lt;/a&gt;处理方式&lt;/h2&gt;&lt;p&gt;使用数据库&lt;code&gt;regexp_replace&lt;/code&gt;函数进行数据处理&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="postgresql" scheme="https://blog.wjc66.cn/tags/postgresql/"/>
    
      <category term="typeorm" scheme="https://blog.wjc66.cn/tags/typeorm/"/>
    
  </entry>
  
  <entry>
    <title>国密sm2加密</title>
    <link href="https://blog.wjc66.cn/%E5%9B%BD%E5%AF%86sm2%E5%8A%A0%E5%AF%86/"/>
    <id>https://blog.wjc66.cn/%E5%9B%BD%E5%AF%86sm2%E5%8A%A0%E5%AF%86/</id>
    <published>2023-04-26T12:22:06.000Z</published>
    <updated>2023-04-26T12:43:22.781Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SM2-国密算法-，加密模式-C1C3C2"><a href="#SM2-国密算法-，加密模式-C1C3C2" class="headerlink" title="SM2(国密算法)，加密模式 C1C3C2"></a>SM2(国密算法)，加密模式 C1C3C2</h2><p>SM2 为非对称加密，基于 ECC。该算法已公开。由于该算法基于 ECC，故其签名速度与秘钥生成速度都快于 RSA。ECC 256 位（SM2 采用的就是 ECC 256 位的一种）安全强度比 RSA 2048 位高，但运算速度快于 RSA。<br>旧标准的加密排序 C1C2C3 新标准 C1C3C2，C1 为 65 字节第 1 字节为压缩标识，这里固定为 0x04，后面 64 字节为 xy 分量各 32 字节。C3 为 32 字节。C2 长度与原文一致。</p><blockquote><p>公钥：049cbf6df92258b385b82844d29039183d98e205726bcecd71b40ded26e717d3ccb9132685432eaafbcb58683c3d303a1e79137447231f8db33226b24893fcd429</p></blockquote><blockquote><p>私钥：6c4a9b2d44704400552b4b90c39c5bca3e5c0ac1b91324e3d0579eebf24830bd</p></blockquote><a id="more"></a><h3 id="java"><a href="#java" class="headerlink" title="java"></a>java</h3><ol><li>添加包</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.70&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>java 加密</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> crypto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.gm.GMNamedCurves;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x9.X9ECParameters;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.InvalidCipherTextException;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.engines.SM2Engine;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.params.ECDomainParameters;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.params.ECPublicKeyParameters;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.params.ParametersWithRandom;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.math.ec.ECPoint;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.util.encoders.Base64;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.util.encoders.Hex;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> klover</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> SM2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/4/25 12:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SM2</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> InvalidCipherTextException </span>&#123;</span><br><span class="line">        <span class="comment">// 加密代码示例</span></span><br><span class="line">        <span class="keyword">final</span> String SPEC_NAME = <span class="string">"sm2p256v1"</span>;</span><br><span class="line">        <span class="keyword">final</span> X9ECParameters x9ECParameters = GMNamedCurves.getByName(SPEC_NAME);</span><br><span class="line">        <span class="keyword">final</span> ECDomainParameters ecDomainParameters = <span class="keyword">new</span> ECDomainParameters(x9ECParameters.getCurve(), x9ECParameters.getG(), x9ECParameters.getN());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 公钥数据</span></span><br><span class="line">        String encodedPub = <span class="string">"049cbf6df92258b385b82844d29039183d98e205726bcecd71b40ded26e717d3ccb9132685432eaafbcb58683c3d303a1e79137447231f8db33226b24893fcd429"</span>;</span><br><span class="line">        String data = <span class="string">"6220012345670001"</span>; <span class="comment">// 待加密数据</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] pointBytes = Hex.decode(encodedPub);</span><br><span class="line">        ECPoint q = x9ECParameters.getCurve().decodePoint(pointBytes);</span><br><span class="line">        ECPublicKeyParameters ecPublicKeyParameters = <span class="keyword">new</span> ECPublicKeyParameters(q, ecDomainParameters);</span><br><span class="line">        <span class="comment">// 采用 C1 || C3 || C2 的模式</span></span><br><span class="line">        SM2Engine sm2Engine = <span class="keyword">new</span> SM2Engine(SM2Engine.Mode.C1C3C2);</span><br><span class="line">        <span class="comment">// 自定义固定签名</span></span><br><span class="line"><span class="comment">//        SecureRandom secureRandom = new SecureRandom(encodedPub.getBytes(StandardCharsets.UTF_8));</span></span><br><span class="line"><span class="comment">//        SecureRandom random = CryptoServicesRegistrar.getSecureRandom(secureRandom);</span></span><br><span class="line"><span class="comment">//        sm2Engine.init(true, new ParametersWithRandom(ecPublicKeyParameters, random));</span></span><br><span class="line">        <span class="comment">// 动态</span></span><br><span class="line">        sm2Engine.init(<span class="keyword">true</span>, <span class="keyword">new</span> ParametersWithRandom(ecPublicKeyParameters));</span><br><span class="line">        <span class="keyword">byte</span>[] dataBytes = data.getBytes();</span><br><span class="line">        <span class="keyword">byte</span>[] cipherBytes = sm2Engine.processBlock(dataBytes, <span class="number">0</span>, dataBytes.length);</span><br><span class="line">        String encryptedData = <span class="keyword">new</span> String(Base64.encode(cipherBytes));</span><br><span class="line">        System.out.println(encryptedData);</span><br><span class="line">        <span class="comment">// 加密结果示例: BB5SdLKsA2dqJTeXUFpRf9M6htKBrfYOTlaVUFHp340wXQ6quFU3fT9PSw8Hf6s1QyqMizJYjnvl/Jsqn91Zr6KXXhZUdeRctUBtvkUOFB6QYeHLa+dk5mQTOhG0cJGaOWd3tNF/3pM7w0lk3snC6X0=</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><ol><li>添加包</li></ol><blockquote><p>gmsm-sm2js</p></blockquote><ol start="2"><li>使用</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> SM2 <span class="keyword">from</span> <span class="string">"gmsm-sm2js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加密方式 SM2 sm2p256v1</span></span><br><span class="line"><span class="comment"> * @publicKey 加密公钥</span></span><br><span class="line"><span class="comment"> * @msg 原文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sm2p256v1Encrypt = <span class="function">(<span class="params">publicKey: <span class="built_in">string</span>, msg: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> encrypt = SM2.encrypt(publicKey, msg);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Buffer.from(encrypt, <span class="string">"hex"</span>).toString(<span class="string">"base64"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解密方式 SM2 sm2p256v1</span></span><br><span class="line"><span class="comment"> * @publicKey 解密私钥</span></span><br><span class="line"><span class="comment"> * @msg 密文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sm2p256v1Decrypt = <span class="function">(<span class="params">privateKey: <span class="built_in">string</span>, msg: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> decrypt = SM2.decrypt(privateKey, Buffer.from(msg, <span class="string">"base64"</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Buffer.from(decrypt, <span class="string">"hex"</span>).toString(<span class="string">"utf8"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>测试</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privateKey =</span><br><span class="line">  <span class="string">"6c4a9b2d44704400552b4b90c39c5bca3e5c0ac1b91324e3d0579eebf24830bd"</span>;</span><br><span class="line"><span class="keyword">const</span> publicKey =</span><br><span class="line">  <span class="string">"049cbf6df92258b385b82844d29039183d98e205726bcecd71b40ded26e717d3ccb9132685432eaafbcb58683c3d303a1e79137447231f8db33226b24893fcd429"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> msgString = <span class="string">"6220012345670001"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> encryptData = sm2p256v1Encrypt(publicKey, msgString);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(encryptData);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sm2p256v1Decrypt(privateKey, encryptData));</span><br></pre></td></tr></table></figure><h3 id="node-解密-java-加密的值"><a href="#node-解密-java-加密的值" class="headerlink" title="node 解密 java 加密的值"></a>node 解密 java 加密的值</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  sm2p256v1Decrypt(</span><br><span class="line">    privateKey,</span><br><span class="line">    <span class="string">"BB5SdLKsA2dqJTeXUFpRf9M6htKBrfYOTlaVUFHp340wXQ6quFU3fT9PSw8Hf6s1QyqMizJYjnvl/Jsqn91Zr6KXXhZUdeRctUBtvkUOFB6QYeHLa+dk5mQTOhG0cJGaOWd3tNF/3pM7w0lk3snC6X0="</span></span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SM2-国密算法-，加密模式-C1C3C2&quot;&gt;&lt;a href=&quot;#SM2-国密算法-，加密模式-C1C3C2&quot; class=&quot;headerlink&quot; title=&quot;SM2(国密算法)，加密模式 C1C3C2&quot;&gt;&lt;/a&gt;SM2(国密算法)，加密模式 C1C3C2&lt;/h2&gt;&lt;p&gt;SM2 为非对称加密，基于 ECC。该算法已公开。由于该算法基于 ECC，故其签名速度与秘钥生成速度都快于 RSA。ECC 256 位（SM2 采用的就是 ECC 256 位的一种）安全强度比 RSA 2048 位高，但运算速度快于 RSA。&lt;br&gt;旧标准的加密排序 C1C2C3 新标准 C1C3C2，C1 为 65 字节第 1 字节为压缩标识，这里固定为 0x04，后面 64 字节为 xy 分量各 32 字节。C3 为 32 字节。C2 长度与原文一致。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;公钥：049cbf6df92258b385b82844d29039183d98e205726bcecd71b40ded26e717d3ccb9132685432eaafbcb58683c3d303a1e79137447231f8db33226b24893fcd429&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;私钥：6c4a9b2d44704400552b4b90c39c5bca3e5c0ac1b91324e3d0579eebf24830bd&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="nodejs" scheme="https://blog.wjc66.cn/tags/nodejs/"/>
    
      <category term="crypto" scheme="https://blog.wjc66.cn/tags/crypto/"/>
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>发布一个golang的工具包到github</title>
    <link href="https://blog.wjc66.cn/%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AAgolang%E7%9A%84%E5%B7%A5%E5%85%B7%E5%8C%85%E5%88%B0github/"/>
    <id>https://blog.wjc66.cn/%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AAgolang%E7%9A%84%E5%B7%A5%E5%85%B7%E5%8C%85%E5%88%B0github/</id>
    <published>2022-10-26T07:54:10.000Z</published>
    <updated>2022-10-26T08:21:41.395Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Go-语言环境安装"><a href="#Go-语言环境安装" class="headerlink" title="Go 语言环境安装"></a>Go 语言环境安装</h2><p>Go 语言支持以下系统：</p><ul><li>Linux</li><li>FreeBSD</li><li>Mac OS X（也称为 Darwin）</li><li>Windows<br>安装包下载地址为：<a href="https://golang.org/dl/。" target="_blank" rel="external nofollow noopener noreferrer">https://golang.org/dl/。</a></li></ul><p>如果打不开可以使用这个地址：<a href="https://golang.google.cn/dl/。" target="_blank" rel="external nofollow noopener noreferrer">https://golang.google.cn/dl/。</a></p><a id="more"></a><h2 id="新建空项目"><a href="#新建空项目" class="headerlink" title="新建空项目"></a>新建空项目</h2><ul><li><p>在 github 上新建一个公开的项目，比如我创建一个 qbit-go-sdk 的项目</p></li><li><p>将项目克隆到本地来</p></li><li><p>进入项目根目录，使用<code>go mod</code>初始化项目</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">go mod init github.com/klover2/qbit-go-sdk</span><br></pre></td></tr></table></figure><ul><li>初始化后的 go.mod 的文件如下，如果你的 module 不是你 github 的项目地址你要修改过来</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module github.com/klover2/qbit-go-sdk</span><br><span class="line"></span><br><span class="line">go 1.16</span><br></pre></td></tr></table></figure><ul><li>随便写一些东西发布到 githup 上</li></ul><h2 id="将-github-上的工程转换为别人可以下载的依赖包"><a href="#将-github-上的工程转换为别人可以下载的依赖包" class="headerlink" title="将 github 上的工程转换为别人可以下载的依赖包"></a>将 github 上的工程转换为别人可以下载的依赖包</h2><ol><li>本地使用 git 命令创建一个 tag</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git tag -a tag名 -m <span class="string">'创建一个版本'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eg</span></span><br><span class="line"></span><br><span class="line">git tag -a v1.0.0 -m <span class="string">'创建一个项目'</span></span><br></pre></td></tr></table></figure><ol start="2"><li>将 tag 提交到 github 上</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git push origin tag名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># eg</span></span><br><span class="line"></span><br><span class="line">git push origin v1.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一次性提交本地全部的tag</span></span><br><span class="line"></span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><h2 id="直接在-github-上查看是否已经提交成功-tag"><a href="#直接在-github-上查看是否已经提交成功-tag" class="headerlink" title="直接在 github 上查看是否已经提交成功 tag"></a>直接在 github 上查看是否已经提交成功 tag</h2><p><img src="https://img-blog.csdnimg.cn/ae6769f561a44c4c94abab5df257a55b.png" alt="在这里插入图片描述"></p><h2 id="创建对应的发布"><a href="#创建对应的发布" class="headerlink" title="创建对应的发布"></a>创建对应的发布</h2><p><img src="https://img-blog.csdnimg.cn/5dce1126bf7e4c6f982f6bf5626e1d04.png" alt="在这里插入图片描述"></p><h2 id="查看自己发布的包"><a href="#查看自己发布的包" class="headerlink" title="查看自己发布的包"></a>查看自己发布的包</h2><p><a href="https://pkg.go.dev/" target="_blank" rel="external nofollow noopener noreferrer">pkg.go</a> 同步有点慢，不用在乎，上传到 githup 上就可以用了</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><code>go get github.com/klover2/qbit-go-sdk</code><br><code>go get vendor</code> 把代码拉到本地</p><h2 id="更新包版本"><a href="#更新包版本" class="headerlink" title="更新包版本"></a>更新包版本</h2><p>直接修改<code>go.mod</code> 对应包的版本<br><code>go mod tidy</code> 更新包<br><code>go get vendor</code> 把代码拉到本地</p><h2 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>打开你的 PowerShell 并执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt; <span class="variable">$env</span>:GO111MODULE = <span class="string">"on"</span></span><br><span class="line">C:\&gt; <span class="variable">$env</span>:GOPROXY = <span class="string">"https://goproxy.cn"</span></span><br></pre></td></tr></table></figure><p>或者</p><ol><li>打开“开始”并搜索“env”</li><li>选择“编辑系统环境变量”</li><li>点击“环境变量…”按钮</li><li>在“&lt;你的用户名&gt; 的用户变量”章节下（上半部分）</li><li>点击“新建…”按钮</li><li>选择“变量名”输入框并输入“GO111MODULE”</li><li>选择“变量值”输入框并输入“on”</li><li>点击“确定”按钮</li><li>点击“新建…”按钮</li><li>选择“变量名”输入框并输入“GOPROXY”</li><li>选择“变量值”输入框并输入“<a href="https://goproxy.cn”" target="_blank" rel="external nofollow noopener noreferrer">https://goproxy.cn”</a></li><li>点击“确定”按钮</li></ol><h3 id="Go-1-13-及以上（推荐）"><a href="#Go-1-13-及以上（推荐）" class="headerlink" title="Go 1.13 及以上（推荐）"></a>Go 1.13 及以上（推荐）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go env -w GO111MODULE=on</span><br><span class="line">$ go env -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure><h3 id="macOS-或-Linux"><a href="#macOS-或-Linux" class="headerlink" title="macOS 或 Linux"></a>macOS 或 Linux</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GO111MODULE=on</span><br><span class="line">$ <span class="built_in">export</span> GOPROXY=https://goproxy.cn</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"export GO111MODULE=on"</span> &gt;&gt; ~/.profile</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"export GOPROXY=https://goproxy.cn"</span> &gt;&gt; ~/.profile</span><br><span class="line">$ <span class="built_in">source</span> ~/.profile</span><br></pre></td></tr></table></figure><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://goproxy.cn/" target="_blank" rel="external nofollow noopener noreferrer">配置代理</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Go-语言环境安装&quot;&gt;&lt;a href=&quot;#Go-语言环境安装&quot; class=&quot;headerlink&quot; title=&quot;Go 语言环境安装&quot;&gt;&lt;/a&gt;Go 语言环境安装&lt;/h2&gt;&lt;p&gt;Go 语言支持以下系统：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;FreeBSD&lt;/li&gt;
&lt;li&gt;Mac OS X（也称为 Darwin）&lt;/li&gt;
&lt;li&gt;Windows&lt;br&gt;安装包下载地址为：&lt;a href=&quot;https://golang.org/dl/。&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noopener noreferrer&quot;&gt;https://golang.org/dl/。&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果打不开可以使用这个地址：&lt;a href=&quot;https://golang.google.cn/dl/。&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noopener noreferrer&quot;&gt;https://golang.google.cn/dl/。&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="golang" scheme="https://blog.wjc66.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>pipenv命令的使用</title>
    <link href="https://blog.wjc66.cn/pipenv%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://blog.wjc66.cn/pipenv%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8/</id>
    <published>2022-10-24T05:04:55.000Z</published>
    <updated>2022-10-24T05:07:52.299Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">pip install pipenv</span><br><span class="line"><span class="comment">#查看版本</span></span><br><span class="line">pipenv --version</span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line"><span class="comment">#pipenv --python 3.8(可以不用)</span></span><br><span class="line"><span class="comment">#激活虚拟环境</span></span><br><span class="line">pipenv shell</span><br><span class="line"><span class="comment">#退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">安装开发扩展</span><br><span class="line">pipenv install --dev django</span><br><span class="line"><span class="comment">#安装生产环境</span></span><br><span class="line">pipenv install</span><br><span class="line"><span class="comment">#安装开发环境</span></span><br><span class="line">pipenv install --dev</span><br><span class="line"><span class="comment">#卸载包</span></span><br><span class="line">pipenv uninstall [package]</span><br><span class="line"><span class="comment">#查看创建虚拟机所在目录</span></span><br><span class="line">pipenv --venv全局切换版本pyenv global 3.6.4当前目录切换版本pyenv <span class="built_in">local</span> 3.6.4pipenv --three <span class="comment"># 初始化一个python3虚拟环境，如果想初始化pyhton2的虚拟环境，则使用pipenv --twopipenv --python 2.7.14删除环境(在pipfile所在目录执行)</span></span><br><span class="line">pipenv uninstall --all <span class="comment"># 卸载全部包</span></span><br><span class="line">pipenv --rm     <span class="comment"># 删除整个环境  不会删除pipfile</span></span><br></pre></td></tr></table></figure><h2 id="安装第三方库"><a href="#安装第三方库" class="headerlink" title="安装第三方库"></a>安装第三方库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装第三方库</span></span><br><span class="line">pipenv install [第三方库名]</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看包的依赖结构</span></span><br><span class="line">pipenv graph</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看安装的包</span></span><br><span class="line">pip list</span><br><span class="line"></span><br><span class="line"><span class="comment">#卸载包</span></span><br><span class="line">pipenv uninstall [第三方库名]</span><br><span class="line"></span><br><span class="line"><span class="comment">#退出虚拟环境</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除虚拟环境</span></span><br><span class="line">pipenv – – rm</span><br><span class="line"></span><br><span class="line"><span class="comment">#要更新所有的依赖项，使用命令 pipenv update</span></span><br><span class="line"><span class="comment">#使用 pipenv update &lt;pkg&gt; 命令升级指定的包</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果项目已经存在requirements.txt</span></span><br><span class="line">pipenv install -r requirements.txt</span><br></pre></td></tr></table></figure><h2 id="安装环境区分"><a href="#安装环境区分" class="headerlink" title="安装环境区分"></a>安装环境区分</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pipenv install</span><br><span class="line">–dev 安装Pipfile中 [default] 和 [devlop] 中的包</span><br><span class="line"></span><br><span class="line">–system 使用系统的 pip 命令而不是virtualenv的 pip 命令</span><br><span class="line"></span><br><span class="line">–ignore-pipfile 忽略 Pipfile 文件而直接安装 Pipfile.lock 中的包</span><br><span class="line"></span><br><span class="line">–ignore-lock 忽略 Pipfile.lock 文件而直接安装 Pipfile 中的包。此外，不会更新 Pipfile.lock 文件。</span><br><span class="line"></span><br><span class="line">pipenv uninstall</span><br><span class="line">–all 从虚拟环境中移除所有已安装的包，但 Pipfile.lock 文件不受影响</span><br><span class="line">–all-dev 从虚拟环境中卸载所有开发包，并从 Pipfile 文件中移除这些包</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre
      
    
    </summary>
    
    
    
      <category term="python" scheme="https://blog.wjc66.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>封装代码成python包</title>
    <link href="https://blog.wjc66.cn/%E5%B0%81%E8%A3%85%E4%BB%A3%E7%A0%81%E6%88%90python%E5%8C%85/"/>
    <id>https://blog.wjc66.cn/%E5%B0%81%E8%A3%85%E4%BB%A3%E7%A0%81%E6%88%90python%E5%8C%85/</id>
    <published>2022-10-24T03:15:55.000Z</published>
    <updated>2022-10-24T03:40:56.011Z</updated>
    
    <content type="html"><![CDATA[<h2 id="注册账户"><a href="#注册账户" class="headerlink" title="注册账户"></a>注册账户</h2><p>PyPI, Python Package Index,是 python 的正式第三方软件包的软件存储库。一些软件包管理器如 pip，就是默认从 PyPI 下载软件包</p><p>链接： <a href="https://pypi.org/" target="_blank" rel="external nofollow noopener noreferrer">https://pypi.org/</a></p><p>在 Pypi 中注册账号，并且需要激活邮箱</p><a id="more"></a><h2 id="更新-pip"><a href="#更新-pip" class="headerlink" title="更新 pip"></a>更新 pip</h2><p><code>python -m pip install --upgrade pip</code></p><h2 id="安装-pipenv"><a href="#安装-pipenv" class="headerlink" title="安装 pipenv"></a>安装 pipenv</h2><p><code>pip install pipenv</code></p><h2 id="使用-pyCharm-创建项目"><a href="#使用-pyCharm-创建项目" class="headerlink" title="使用 pyCharm 创建项目"></a>使用 pyCharm 创建项目</h2><p>选择 pipenv<br><img src="https://img-blog.csdnimg.cn/5aca5d0c3fba4d958f4b59d4bd5fec84.png" alt="在这里插入图片描述"><br>在当前项目目录执行 <code>pipenv install</code>,初始化后项目如下</p><p><img src="https://img-blog.csdnimg.cn/21bf61bd322644d4b5b246cbab0b632d.png" alt="在这里插入图片描述"></p><h2 id="创建包名-mypackage"><a href="#创建包名-mypackage" class="headerlink" title="创建包名 mypackage"></a>创建包名 mypackage</h2><p><code>注意</code>：包名尽量不要用驼峰和中划线做包名，不然容易出现找不到包名<br><img src="https://img-blog.csdnimg.cn/08aa097a6f1944858778b1defba75f0f.png" alt="在这里插入图片描述"></p><h2 id="创建-setup-py-用于编译包配置"><a href="#创建-setup-py-用于编译包配置" class="headerlink" title="创建 setup.py 用于编译包配置"></a>创建 setup.py 用于编译包配置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> setuptools</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"README.md"</span>, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    readme = f.read()</span><br><span class="line"></span><br><span class="line">requires = [</span><br><span class="line">    <span class="string">"requests&gt;=2.28.1"</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">setuptools.setup(</span><br><span class="line">    name=<span class="string">"mypackage"</span>,</span><br><span class="line">    version=<span class="string">"1.0.0"</span>,</span><br><span class="line">    keywords=[<span class="string">"关键词1"</span>, <span class="string">"关键词2"</span>, <span class="string">"关键词3"</span>],</span><br><span class="line">    author=<span class="string">"开发者"</span>,</span><br><span class="line">    author_email=<span class="string">"开发者邮箱"</span>,</span><br><span class="line">    description=<span class="string">"描述"</span>,</span><br><span class="line">    long_description=readme,</span><br><span class="line">    long_description_content_type=<span class="string">"text/markdown"</span>,</span><br><span class="line">    url=<span class="string">"项目githup地址"</span>,</span><br><span class="line">    packages=setuptools.find_packages(exclude=(<span class="string">'tests'</span>, <span class="string">'.pypirc'</span>)),</span><br><span class="line">    classifiers=[</span><br><span class="line">        <span class="string">"Programming Language :: Python :: 3"</span>,</span><br><span class="line">        <span class="string">"License :: OSI Approved :: Apache Software License"</span>,</span><br><span class="line">        <span class="string">"Operating System :: OS Independent"</span>,</span><br><span class="line">    ],</span><br><span class="line">    python_requires=<span class="string">'&gt;=3.7'</span>,</span><br><span class="line">    install_requires=requires,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><code>注意</code>：install_requires 是你当前包需要的外部引入，需要在这里声明，不然其他人用你当前包会出现缺少引入</p><h2 id="配置-pypi-密码"><a href="#配置-pypi-密码" class="headerlink" title="配置 pypi 密码"></a>配置 pypi 密码</h2><p>创建 <code>.pypirc</code> 防止你电脑的用户目录下：<code>C:\Users\klover</code>,因为 setup.py 上传指令会检查.pypirc 文件是否存在在路径 $HOME/.pypirc 中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[distutils]</span><br><span class="line">index-servers =</span><br><span class="line">    pypi</span><br><span class="line"></span><br><span class="line">[pypi]</span><br><span class="line">repository: &lt;repository-url&gt;</span><br><span class="line">username: &lt;username&gt;</span><br><span class="line">password: &lt;password&gt;</span><br></pre></td></tr></table></figure><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译</span></span><br><span class="line"><span class="comment"># 执行当前命令需要移除 build dist mypackage.egg-info 三个文件夹连同里面的文件</span></span><br><span class="line"></span><br><span class="line">python setup.py sdist bdist_wheel</span><br></pre></td></tr></table></figure><h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">twine upload dist/*</span><br></pre></td></tr></table></figure><p>上传成功就能在 pypi 上看见了</p><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://zhuanlan.zhihu.com/p/342682533" target="_blank" rel="external nofollow noopener noreferrer">Pypi 官方教程中文版：封装代码成 python 包</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;注册账户&quot;&gt;&lt;a href=&quot;#注册账户&quot; class=&quot;headerlink&quot; title=&quot;注册账户&quot;&gt;&lt;/a&gt;注册账户&lt;/h2&gt;&lt;p&gt;PyPI, Python Package Index,是 python 的正式第三方软件包的软件存储库。一些软件包管理器如 pip，就是默认从 PyPI 下载软件包&lt;/p&gt;
&lt;p&gt;链接： &lt;a href=&quot;https://pypi.org/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noopener noreferrer&quot;&gt;https://pypi.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在 Pypi 中注册账号，并且需要激活邮箱&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="python" scheme="https://blog.wjc66.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Jar上传到maven中央仓库</title>
    <link href="https://blog.wjc66.cn/Jar%E4%B8%8A%E4%BC%A0%E5%88%B0maven%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93/"/>
    <id>https://blog.wjc66.cn/Jar%E4%B8%8A%E4%BC%A0%E5%88%B0maven%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93/</id>
    <published>2022-10-17T10:29:26.000Z</published>
    <updated>2023-07-14T03:30:56.390Z</updated>
    
    <content type="html"><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>开发环境为：win11 + jdk8 + maven</p><h2 id="注册账户"><a href="#注册账户" class="headerlink" title="注册账户"></a>注册账户</h2><p><a href="https://issues.sonatype.org/secure/Signup!default.jspa" target="_blank" rel="external nofollow noopener noreferrer">Sign up for Jira - Sonatype JIRA</a><br>选择中文 比较好</p><p>如果未使用过 Sonatype 系统，需要先注册一个帐号。</p><ul><li>Email: 填写自己的邮箱帐号即可，在 Sonatype 上的相关操作，会通知到这个邮箱帐号来提醒你相关进度。</li><li>Full name: 填写联系人名称。</li><li>Username: 这个就是你在 Sonatype 的登录帐号了。</li><li>Password: 为登录密码，要求至少 8 位，并带有大小写字母和字符。</li></ul><a id="more"></a><h2 id="项目申请"><a href="#项目申请" class="headerlink" title="项目申请"></a>项目申请</h2><h3 id="创建工单"><a href="#创建工单" class="headerlink" title="创建工单"></a>创建工单</h3><p>可以理解为在 Sonatype 系统中申请一个自己的项目，以 Group Id 为单位，Group Id 支持域名地址和 Github 地址两种方式验证，大家可根据实际情况自行选择。申请后需要经过管理员对我们填写的 Group Id 所有权进行验证，审核通过后方可上传 jar 包。我们在页面顶部点击 Create 按钮来创建工单。</p><ul><li>Project: 项目类型。选择 Community Support - Open Source Project Repository Hosting (OSSRH)</li><li>Issue Type: 工单类型。选择 New Project</li><li>Summary: 填写 jar 包名称即可</li><li>Description: 选填项，写一些描述</li><li>Group Id: 填写项目的 Group Id，域名和 Github Group Id 两种方式下面分别介绍申请过程</li><li>Project URL: 填写项目主页，可以是托管地址，也可以是官网地址</li><li>SCM URL: 填写项目的 Git 地址<br><img src="https://img-blog.csdnimg.cn/7320f8f0f35e4d069fad0082c289a67a.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5204dc640c6e442584af3cdc78eeebf6.png" alt="在这里插入图片描述"><br>按照图片中提示 在 githup 中创建名字为<code>OSSRH-85210</code>(每个人不一样)的空项目，同时把 project url 和 scm url 这两个地址改成你当前项目名称，然后就是等待审核。</li></ul><h3 id="审核通过"><a href="#审核通过" class="headerlink" title="审核通过"></a>审核通过</h3><p>当你收到如下图的回复 说明你就成功了<br><img src="https://img-blog.csdnimg.cn/8b04fa253c3d4fb99c0ef62683d6657d.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/159e7360235d47cea7e641caa7bbea2c.png" alt="在这里插入图片描述"></p><h2 id="GPG-签名"><a href="#GPG-签名" class="headerlink" title="GPG 签名"></a>GPG 签名</h2><p>GPG 的主要作用是生成密钥对，发布到 Maven 仓库中的所有文件都要使用 GPG 签名，以保障完整性。使用 Windows 的可以下载 gpg4win 地址：<a href="https://www.gpg4win.org/download.html" target="_blank" rel="external nofollow noopener noreferrer">https://www.gpg4win.org/download.html</a> ，安装后执行 gpg –gen-key 命令新建密钥对。</p><p>执行命令后，需要输入 姓名 和 邮箱 还有 Passphase（证书密码），Passphase 需要记住，在我们使用证书的时候会要求我们输入密码。</p><p><img src="https://img-blog.csdnimg.cn/07483a7bc7244173bf44e1f8eb019889.png" alt="在这里插入图片描述"><br>执行完之后我们会得到上图中的 pub 串，接着我们执行以下命令将 pub 上传到 key 验证库(不成功多试几次)<br><code>gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys E89F2504BF0CE3337B26E45E485D1495DA08F9F6</code><br>查询是否成功<br><code>gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys E89F2504BF0CE3337B26E45E485D1495DA08F9F6</code></p><p>获取 sign3 (后面 maven setting.xml 用得上)<br><code>gpg --list-signatures --keyid-format 0xshort</code><br><img src="https://img-blog.csdnimg.cn/d6ddfb5b492140d9bd2bc64c2baa6e12.png" alt="在这里插入图片描述"></p><h2 id="Maven-配置"><a href="#Maven-配置" class="headerlink" title="Maven 配置"></a>Maven 配置</h2><ul><li>在 Maven 全局配置文件 setting.xml 中配置</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">username</span>&gt;</span>sonatype 账户名称<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">password</span>&gt;</span>sonatype 密码<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>配置 gpg 的账户密码，复制以下配置，修改为自己的密码后，添加到 setting.xml 文件中的</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gpg.executable</span>&gt;</span>gpg<span class="tag">&lt;/<span class="name">gpg.executable</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gpg.keyname</span>&gt;</span>上面你获取的sign3<span class="tag">&lt;/<span class="name">gpg.keyname</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gpg.passphrase</span>&gt;</span>gpg 你设置的密码<span class="tag">&lt;/<span class="name">gpg.passphrase</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 对应上面的groupId 不能乱写 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.klover2<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>你自己的项目名称<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>描述<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://github.com/klover2/**<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  apache 2.0 协议  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>The Apache Software License, Version 2.0<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.apache.org/licenses/LICENSE-2.0.txt<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">distribution</span>&gt;</span>repo<span class="tag">&lt;/<span class="name">distribution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- SCM信息 -&gt; git在github上托管 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>&gt;</span>scm:git:https://github.com/klover2/**.git<span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>git:https://github.com/klover2/**<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 开发者信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>klover<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 插件版本 直接拷贝 start --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nexus-staging-maven-plugin.version</span>&gt;</span>1.6.7<span class="tag">&lt;/<span class="name">nexus-staging-maven-plugin.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven-source-plugin.version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">maven-source-plugin.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven-javadoc-plugin.version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">maven-javadoc-plugin.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven-gpg-plugin.version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">maven-gpg-plugin.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven-release-plugin.version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">maven-release-plugin.version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 插件版本 直接拷贝 end --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 插件包 直接拷贝 start --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sonatype.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nexus-staging-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;nexus-staging-maven-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-source-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-javadoc-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-gpg-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-gpg-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 插件包 直接拷贝 end --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 默认配置 直接拷贝 start --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--生成源码插件--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-source-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-sources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--生成API文档插件--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-javadoc-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-javadocs<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--发布到中央SNAPSHOT仓库插件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sonatype.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nexus-staging-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;nexus-staging-maven-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">serverId</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">serverId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">nexusUrl</span>&gt;</span>https://s01.oss.sonatype.org/<span class="tag">&lt;/<span class="name">nexusUrl</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 开启true 自动同步--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">autoReleaseAfterClose</span>&gt;</span>false<span class="tag">&lt;/<span class="name">autoReleaseAfterClose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 使用Maven Release插件执行发布部署 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-release-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-release-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">autoVersionSubmodules</span>&gt;</span>true<span class="tag">&lt;/<span class="name">autoVersionSubmodules</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">useReleaseProfile</span>&gt;</span>false<span class="tag">&lt;/<span class="name">useReleaseProfile</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">releaseProfiles</span>&gt;</span>release<span class="tag">&lt;/<span class="name">releaseProfiles</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span>deploy<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--gpg插件--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-gpg-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-gpg-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>sign-artifacts<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>sign<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--suppress UnresolvedMavenProperty --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">keyname</span>&gt;</span>$&#123;gpg.keyname&#125;<span class="tag">&lt;/<span class="name">keyname</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--suppress UnresolvedMavenProperty --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">passphraseServerId</span>&gt;</span>$&#123;gpg.keyname&#125;<span class="tag">&lt;/<span class="name">passphraseServerId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--注意,此id必须与setting.xml中指定的一致--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认配置 直接拷贝 end --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="打包发布"><a href="#打包发布" class="headerlink" title="打包发布"></a>打包发布</h2><p>完成以上配置，我们就可以往 Maven 中央仓库上传 jar 包了，我们使用 Maven 命令上传。</p><blockquote><p><code>mvn clean deploy -P release</code></p></blockquote><p>如果是子项目 &gt; <code>mvn clean deploy -projects demo -P release</code><br>如下图 就说明发布成功了。</p><p><img src="https://img-blog.csdnimg.cn/a75459d2b6754beeb2973fc5305713aa.png" alt="在这里插入图片描述"></p><p>届时你可以在<a href="https://s01.oss.sonatype.org/" target="_blank" rel="external nofollow noopener noreferrer">Nexus Repository Manager</a>:中找到.<br><img src="https://img-blog.csdnimg.cn/24027c5a1c584085bd6d187f9a8f6eab.png" alt="在这里插入图片描述"></p><p>4 小时内你可以在 <a href="https://search.maven.org/" target="_blank" rel="external nofollow noopener noreferrer">Maven Central Repository Search</a>中搜索到.</p><p>在<a href="https://mvnrepository.com/" target="_blank" rel="external nofollow noopener noreferrer">mvnrepository</a>中搜索找可能需要几天。</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol><li><p>如果你版本号是以 SNAPSHOT 结尾，不会发布 maven 中央仓库。</p></li><li><p><code>&lt;autoReleaseAfterClose&gt;false&lt;/autoReleaseAfterClose&gt;</code> 由于我关闭了自动同步，所以需要在 Staging Repositories 手动点 release 发布<br><img src="https://img-blog.csdnimg.cn/09b78d71349b4d4b86951141f3b045d4.png" alt="在这里插入图片描述"></p></li><li><p>是否需要发布单元测试文件</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -DskipTests，不执行测试用例，但编译测试用例类生成相应的class文件至target/test-classes下</span></span><br><span class="line"></span><br><span class="line">mvn clean deploy -P release -DskipTests</span><br><span class="line"></span><br><span class="line"><span class="comment"># -Dmaven.test.skip=true，不执行测试用例，也不编译测试用例类</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要用引号</span></span><br><span class="line">mvn clean deploy -P release <span class="string">'-Dmaven.test.skip=true'</span></span><br></pre></td></tr></table></figure><h2 id="出现的问题"><a href="#出现的问题" class="headerlink" title="出现的问题"></a>出现的问题</h2><ol><li>nexus staging maven 插件：maven 部署失败：执行时遇到 API 不兼容</li></ol><p>配置环境变量：&gt; <code>export MAVEN_OPTS=&quot;--add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.desktop/java.awt.font=ALL-UNNAMED&quot;</code></p><p><img src="https://img-blog.csdnimg.cn/7582168ed594457a85165ed15b50ce2e.png" alt="在这里插入图片描述"></p><h2 id="使用域名"><a href="#使用域名" class="headerlink" title="使用域名"></a>使用域名</h2><p><img src="https://img-blog.csdnimg.cn/d1d8ac935f674f8cbcf45bc48ccad96f.png" alt="在这里插入图片描述"><br>测试是否添加成功<br><code>host -t txt OSSRH-70704.zzq0324.cn</code>;</p><p><a href="https://www.zzq0324.cn/2021/07/16/how-to-deploy-jar-to-maven-central-part1/" target="_blank" rel="external nofollow noopener noreferrer">原文</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;开发环境为：win11 + jdk8 + maven&lt;/p&gt;
&lt;h2 id=&quot;注册账户&quot;&gt;&lt;a href=&quot;#注册账户&quot; class=&quot;headerlink&quot; title=&quot;注册账户&quot;&gt;&lt;/a&gt;注册账户&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://issues.sonatype.org/secure/Signup!default.jspa&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noopener noreferrer&quot;&gt;Sign up for Jira - Sonatype JIRA&lt;/a&gt;&lt;br&gt;选择中文 比较好&lt;/p&gt;
&lt;p&gt;如果未使用过 Sonatype 系统，需要先注册一个帐号。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Email: 填写自己的邮箱帐号即可，在 Sonatype 上的相关操作，会通知到这个邮箱帐号来提醒你相关进度。&lt;/li&gt;
&lt;li&gt;Full name: 填写联系人名称。&lt;/li&gt;
&lt;li&gt;Username: 这个就是你在 Sonatype 的登录帐号了。&lt;/li&gt;
&lt;li&gt;Password: 为登录密码，要求至少 8 位，并带有大小写字母和字符。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="java" scheme="https://blog.wjc66.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>记一次使用redis的keys命令导致redis雪崩的生产事故</title>
    <link href="https://blog.wjc66.cn/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%BD%BF%E7%94%A8redis%E7%9A%84keys%E5%91%BD%E4%BB%A4%E5%AF%BC%E8%87%B4redis%E9%9B%AA%E5%B4%A9%E7%9A%84%E7%94%9F%E4%BA%A7%E4%BA%8B%E6%95%85/"/>
    <id>https://blog.wjc66.cn/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%BD%BF%E7%94%A8redis%E7%9A%84keys%E5%91%BD%E4%BB%A4%E5%AF%BC%E8%87%B4redis%E9%9B%AA%E5%B4%A9%E7%9A%84%E7%94%9F%E4%BA%A7%E4%BA%8B%E6%95%85/</id>
    <published>2022-09-08T09:00:31.000Z</published>
    <updated>2022-09-08T09:15:31.269Z</updated>
    
    <content type="html"><![CDATA[<h2 id="出现原因"><a href="#出现原因" class="headerlink" title="出现原因"></a>出现原因</h2><p>由于需要每时每刻监听三方报错超过十次发送机器人警告，所以每次报错我这边就存入一个（key+时间），同时过期时间为1小时，所以查询当前的一个小时内错误次数，使用 <code>keys key*</code>查询key的数量，就知道错误次数，本来一直没有问题，跑了大半年了，突然有一天redis的cpu100%，直接雪崩，导致客户无法登录，后面排查原因是有个三方一直报错，代码又重试，由于需要机器人提醒(这个时候我们redis key已经超过80w个key),导致一秒钟查上千次询<code>keys</code>命令，最后redis直接爆炸。</p><a id="more"></a><h2 id="官方对keys这个命令的说明"><a href="#官方对keys这个命令的说明" class="headerlink" title="官方对keys这个命令的说明"></a>官方对keys这个命令的说明</h2><p>keys的时间复杂度是O(N)，N为执行该命令下的数据库的key的数量，常数。<br>redis扫描key的速度很快，在入门笔记本大约是40毫秒100w个。<br>警告⚠️：keys用在生产环境只能以极低频率执行。 在大数据库执行时会出现灾难性的性能。如果需要查询某些key，考虑使用SCAN或者sets。</p><h2 id="keys命令为什么会这么慢呢？"><a href="#keys命令为什么会这么慢呢？" class="headerlink" title="keys命令为什么会这么慢呢？"></a>keys命令为什么会这么慢呢？</h2><p>(1) Redis是NoSQL型数据库，以hash数据结构存储的，所以才能实现高效的数据查询。而hash结构对于精确查找是非常快的，对于模糊查询，则无能为力。<br>(2) Redis的命令执行是单线程的，同一时间只能执行单个命令。单一长时间命令会堵塞后续。(可以通过debug sleep 0.1100ms 模拟执行长时间命令)<br>以上两点造成了KEYS进行key查询需要遍历当前db的所有数据，以及当该命令执行完成的时候后续命令都会被堵塞。<br>因此在redis中执行的命令，尽量避免长时间堵塞命令。</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>后面实在没有办法退而求其次，把所有的<code>keys</code>命令移除了，只是简单记录次数了，一直自己自增，半个小时自动过期。还有一种方法就是保存数据库，每进来一条错误日志，就保存一次，按照时间查询这样也可以达到上面的效果，每天或者每月去清理之前的旧数据，防止数据太多。</p><p>看网上推荐使用<code>Scan</code>来替换<code>keys</code>，它是增量地迭代 ，它们每次执行都只会返回少量元素，不会阻塞服务器， 所以这些命令可以用于生产环境， 而不会出现像 KEYS 命令、 SMEMBERS 命令带来的问题。但是会出现.同一个元素可能会被返回多次，所以就没有使用。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;出现原因&quot;&gt;&lt;a href=&quot;#出现原因&quot; class=&quot;headerlink&quot; title=&quot;出现原因&quot;&gt;&lt;/a&gt;出现原因&lt;/h2&gt;&lt;p&gt;由于需要每时每刻监听三方报错超过十次发送机器人警告，所以每次报错我这边就存入一个（key+时间），同时过期时间为1小时，所以查询当前的一个小时内错误次数，使用 &lt;code&gt;keys key*&lt;/code&gt;查询key的数量，就知道错误次数，本来一直没有问题，跑了大半年了，突然有一天redis的cpu100%，直接雪崩，导致客户无法登录，后面排查原因是有个三方一直报错，代码又重试，由于需要机器人提醒(这个时候我们redis key已经超过80w个key),导致一秒钟查上千次询&lt;code&gt;keys&lt;/code&gt;命令，最后redis直接爆炸。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="redis" scheme="https://blog.wjc66.cn/tags/redis/"/>
    
  </entry>
  
</feed>
